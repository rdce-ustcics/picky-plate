{"ast":null,"code":"var _jsxFileName = \"C:\\\\React\\\\pappy\\\\src\\\\auth\\\\RoleRoute.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RoleRoute({\n  allow = [\"user\", \"admin\"],\n  children\n}) {\n  _s();\n  const {\n    isAuthenticated,\n    role,\n    bootstrapped\n  } = useAuth();\n  const loc = useLocation();\n\n  // Wait for auth bootstrap so we don't flash redirects\n  if (!bootstrapped) return null; // or a spinner\n\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true,\n      state: {\n        from: loc\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 12\n    }, this);\n  }\n  if (!allow.includes(role)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/forbidden\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n}\n_s(RoleRoute, \"rdVzdqtkS2Y/cvuomfCU/SnXL34=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = RoleRoute;\nexport function GuestOnlyRoute({\n  children\n}) {\n  _s2();\n  const {\n    isAuthenticated,\n    bootstrapped\n  } = useAuth();\n  if (!bootstrapped) return null;\n  return isAuthenticated ? /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 28\n  }, this) : children;\n}\n_s2(GuestOnlyRoute, \"lQT0X3/80jMiwQWeWCejj+s/uH0=\", false, function () {\n  return [useAuth];\n});\n_c2 = GuestOnlyRoute;\nvar _c, _c2;\n$RefreshReg$(_c, \"RoleRoute\");\n$RefreshReg$(_c2, \"GuestOnlyRoute\");","map":{"version":3,"names":["Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","RoleRoute","allow","children","_s","isAuthenticated","role","bootstrapped","loc","to","replace","state","from","fileName","_jsxFileName","lineNumber","columnNumber","includes","_c","GuestOnlyRoute","_s2","_c2","$RefreshReg$"],"sources":["C:/React/pappy/src/auth/RoleRoute.js"],"sourcesContent":["import { Navigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"./AuthContext\";\r\n\r\nexport default function RoleRoute({ allow = [\"user\",\"admin\"], children }) {\r\n  const { isAuthenticated, role, bootstrapped } = useAuth();\r\n  const loc = useLocation();\r\n\r\n  // Wait for auth bootstrap so we don't flash redirects\r\n  if (!bootstrapped) return null; // or a spinner\r\n\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace state={{ from: loc }} />;\r\n  }\r\n  if (!allow.includes(role)) {\r\n    return <Navigate to=\"/forbidden\" replace />;\r\n  }\r\n  return children;\r\n}\r\n\r\nexport function GuestOnlyRoute({ children }) {\r\n  const { isAuthenticated, bootstrapped } = useAuth();\r\n  if (!bootstrapped) return null;\r\n  return isAuthenticated ? <Navigate to=\"/\" replace /> : children;\r\n}\r\n"],"mappings":";;;AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,eAAe,SAASC,SAASA,CAAC;EAAEC,KAAK,GAAG,CAAC,MAAM,EAAC,OAAO,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACxE,MAAM;IAAEC,eAAe;IAAEC,IAAI;IAAEC;EAAa,CAAC,GAAGT,OAAO,CAAC,CAAC;EACzD,MAAMU,GAAG,GAAGX,WAAW,CAAC,CAAC;;EAEzB;EACA,IAAI,CAACU,YAAY,EAAE,OAAO,IAAI,CAAC,CAAC;;EAEhC,IAAI,CAACF,eAAe,EAAE;IACpB,oBAAOL,OAAA,CAACJ,QAAQ;MAACa,EAAE,EAAC,QAAQ;MAACC,OAAO;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEJ;MAAI;IAAE;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC/D;EACA,IAAI,CAACd,KAAK,CAACe,QAAQ,CAACX,IAAI,CAAC,EAAE;IACzB,oBAAON,OAAA,CAACJ,QAAQ;MAACa,EAAE,EAAC,YAAY;MAACC,OAAO;IAAA;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC7C;EACA,OAAOb,QAAQ;AACjB;AAACC,EAAA,CAduBH,SAAS;EAAA,QACiBH,OAAO,EAC3CD,WAAW;AAAA;AAAAqB,EAAA,GAFDjB,SAAS;AAgBjC,OAAO,SAASkB,cAAcA,CAAC;EAAEhB;AAAS,CAAC,EAAE;EAAAiB,GAAA;EAC3C,MAAM;IAAEf,eAAe;IAAEE;EAAa,CAAC,GAAGT,OAAO,CAAC,CAAC;EACnD,IAAI,CAACS,YAAY,EAAE,OAAO,IAAI;EAC9B,OAAOF,eAAe,gBAAGL,OAAA,CAACJ,QAAQ;IAACa,EAAE,EAAC,GAAG;IAACC,OAAO;EAAA;IAAAG,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,GAAGb,QAAQ;AACjE;AAACiB,GAAA,CAJeD,cAAc;EAAA,QACcrB,OAAO;AAAA;AAAAuB,GAAA,GADnCF,cAAc;AAAA,IAAAD,EAAA,EAAAG,GAAA;AAAAC,YAAA,CAAAJ,EAAA;AAAAI,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}